{
  "version": 3,
  "sources": ["../js/admin-users.js"],
  "sourcesContent": ["document.addEventListener('DOMContentLoaded', async () => {\n  const userModal = document.getElementById('userModal');\n  if (userModal) {\n    const modalTitle = userModal.querySelector('.modal-title');\n    const form = userModal.querySelector('#userForm');\n    const emailInput = userModal.querySelector('#emailInput');\n    const statusInput = userModal.querySelector('#statusInput');\n\n    // Fetch user statuses and populate the dropdown\n    try {\n      const response = await fetch('/api/v3/user-statuses');\n      if (response.ok) {\n        const statuses = await response.json();\n        statuses.forEach((status) => {\n          const option = document.createElement('option');\n          option.value = status.status_slug;\n          option.textContent = status.description;\n          statusInput.appendChild(option);\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching user statuses:', error);\n    }\n\n    userModal.addEventListener('show.bs.modal', (event) => {\n      const button = event.relatedTarget;\n      const userId = button.getAttribute('data-user-id');\n      const userEmail = button.getAttribute('data-user-email');\n\n      if (userId) {\n        // Editing an existing user\n        modalTitle.textContent = 'Edit User';\n        form.action = `/api/v3/admin/users/${userId}?_method=PUT`;\n        emailInput.value = userEmail;\n      } else {\n        // Creating a new user\n        modalTitle.textContent = 'Create User';\n        form.action = '/api/v3/admin/users';\n        emailInput.value = '';\n      }\n    });\n\n    userModal.addEventListener('shown.bs.modal', () => {\n      emailInput.focus();\n    });\n\n    form.addEventListener('submit', async (event) => {\n      event.preventDefault();\n      const formData = new FormData(form);\n      const data = Object.fromEntries(formData.entries());\n      const url = form.action;\n      const method = url.includes('?_method=PUT') ? 'PUT' : 'POST';\n\n      try {\n        const response = await fetch(url.split('?')[0], {\n          method,\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data)\n        });\n\n        if (response.ok) {\n          window.location.reload();\n        } else {\n          alert('Error saving user');\n        }\n      } catch (error) {\n        alert('Error saving user');\n      }\n    });\n  }\n\n  document.querySelectorAll('[data-delete-user]').forEach((button) => {\n    button.addEventListener('click', async (event) => {\n      if (confirm('Are you sure you want to delete this user?')) {\n        const userId = button.getAttribute('data-user-id');\n        try {\n          const response = await fetch(`/api/v3/admin/users/${userId}`, {\n            method: 'DELETE'\n          });\n          if (response.ok) {\n            window.location.reload();\n          } else {\n            alert('Error deleting user');\n          }\n        } catch (error) {\n          alert('Error deleting user');\n        }\n      }\n    });\n  });\n});\n"],
  "mappings": ";;AAAA,WAAS,iBAAiB,oBAAoB,YAAY;AACxD,UAAM,YAAY,SAAS,eAAe,WAAW;AACrD,QAAI,WAAW;AACb,YAAM,aAAa,UAAU,cAAc,cAAc;AACzD,YAAM,OAAO,UAAU,cAAc,WAAW;AAChD,YAAM,aAAa,UAAU,cAAc,aAAa;AACxD,YAAM,cAAc,UAAU,cAAc,cAAc;AAG1D,UAAI;AACF,cAAM,WAAW,MAAM,MAAM,uBAAuB;AACpD,YAAI,SAAS,IAAI;AACf,gBAAM,WAAW,MAAM,SAAS,KAAK;AACrC,mBAAS,QAAQ,CAAC,WAAW;AAC3B,kBAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,mBAAO,QAAQ,OAAO;AACtB,mBAAO,cAAc,OAAO;AAC5B,wBAAY,YAAY,MAAM;AAAA,UAChC,CAAC;AAAA,QACH;AAAA,MACF,SAAS,OAAO;AACd,gBAAQ,MAAM,iCAAiC,KAAK;AAAA,MACtD;AAEA,gBAAU,iBAAiB,iBAAiB,CAAC,UAAU;AACrD,cAAM,SAAS,MAAM;AACrB,cAAM,SAAS,OAAO,aAAa,cAAc;AACjD,cAAM,YAAY,OAAO,aAAa,iBAAiB;AAEvD,YAAI,QAAQ;AAEV,qBAAW,cAAc;AACzB,eAAK,SAAS,uBAAuB,MAAM;AAC3C,qBAAW,QAAQ;AAAA,QACrB,OAAO;AAEL,qBAAW,cAAc;AACzB,eAAK,SAAS;AACd,qBAAW,QAAQ;AAAA,QACrB;AAAA,MACF,CAAC;AAED,gBAAU,iBAAiB,kBAAkB,MAAM;AACjD,mBAAW,MAAM;AAAA,MACnB,CAAC;AAED,WAAK,iBAAiB,UAAU,OAAO,UAAU;AAC/C,cAAM,eAAe;AACrB,cAAM,WAAW,IAAI,SAAS,IAAI;AAClC,cAAM,OAAO,OAAO,YAAY,SAAS,QAAQ,CAAC;AAClD,cAAM,MAAM,KAAK;AACjB,cAAM,SAAS,IAAI,SAAS,cAAc,IAAI,QAAQ;AAEtD,YAAI;AACF,gBAAM,WAAW,MAAM,MAAM,IAAI,MAAM,GAAG,EAAE,CAAC,GAAG;AAAA,YAC9C;AAAA,YACA,SAAS;AAAA,cACP,gBAAgB;AAAA,YAClB;AAAA,YACA,MAAM,KAAK,UAAU,IAAI;AAAA,UAC3B,CAAC;AAED,cAAI,SAAS,IAAI;AACf,mBAAO,SAAS,OAAO;AAAA,UACzB,OAAO;AACL,kBAAM,mBAAmB;AAAA,UAC3B;AAAA,QACF,SAAS,OAAO;AACd,gBAAM,mBAAmB;AAAA,QAC3B;AAAA,MACF,CAAC;AAAA,IACH;AAEA,aAAS,iBAAiB,oBAAoB,EAAE,QAAQ,CAAC,WAAW;AAClE,aAAO,iBAAiB,SAAS,OAAO,UAAU;AAChD,YAAI,QAAQ,4CAA4C,GAAG;AACzD,gBAAM,SAAS,OAAO,aAAa,cAAc;AACjD,cAAI;AACF,kBAAM,WAAW,MAAM,MAAM,uBAAuB,MAAM,IAAI;AAAA,cAC5D,QAAQ;AAAA,YACV,CAAC;AACD,gBAAI,SAAS,IAAI;AACf,qBAAO,SAAS,OAAO;AAAA,YACzB,OAAO;AACL,oBAAM,qBAAqB;AAAA,YAC7B;AAAA,UACF,SAAS,OAAO;AACd,kBAAM,qBAAqB;AAAA,UAC7B;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH,CAAC;",
  "names": []
}
