{
  "version": 3,
  "sources": ["../js/api-keys.js"],
  "sourcesContent": ["document.addEventListener('DOMContentLoaded', () => {\n  // API Key modal logic\n  const apiKeyModal = document.getElementById('apiKeyModal');\n  if (apiKeyModal) {\n    const modalTitle = apiKeyModal.querySelector('.modal-title');\n    const form = apiKeyModal.querySelector('#apiKeyForm');\n    const input = apiKeyModal.querySelector('#apiKeyNameInput');\n\n    apiKeyModal.addEventListener('show.bs.modal', (event) => {\n      const button = event.relatedTarget;\n      const keyId = button.getAttribute('data-key-id');\n      const keyLabel = button.getAttribute('data-key-label');\n\n      if (keyId) {\n        // Editing an existing key\n        modalTitle.textContent = 'Edit API Key';\n        form.action = `/keys/${keyId}/relabel`;\n        input.value = keyLabel;\n      } else {\n        // Creating a new key\n        modalTitle.textContent = 'Create API Key';\n        form.action = '/keys';\n        input.value = '';\n      }\n    });\n\n    apiKeyModal.addEventListener('shown.bs.modal', () => {\n      input.focus();\n    });\n\n    form.addEventListener('submit', async (e) => {\n      if (form.action.endsWith('/keys')) {\n        e.preventDefault();\n        const formData = new FormData(form);\n        const data = Object.fromEntries(formData.entries());\n\n        try {\n          const response = await fetch('/keys', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(data)\n          });\n\n          if (response.ok) {\n            const { apiKey } = await response.json();\n            const newApiKeySection = document.getElementById('newApiKeySection');\n            const newApiKeyElement = document.getElementById('newApiKey');\n            const copyNewApiKeyButton = document.getElementById('copyNewApiKey');\n\n            newApiKeyElement.textContent = apiKey;\n            copyNewApiKeyButton.setAttribute('data-copy-text', apiKey);\n            newApiKeySection.classList.remove('d-none');\n\n            copyNewApiKeyButton.addEventListener('click', () => {\n              navigator.clipboard.writeText(apiKey).then(() => {\n                copyNewApiKeyButton.innerHTML = '<i class=\"bi bi-check-lg me-2\"></i> Copied!';\n                setTimeout(() => {\n                  window.location.reload();\n                }, 2000);\n              });\n            });\n\n            // Expect Bootstrap JS loaded globally in bundle\n            const modal = window.bootstrap ? window.bootstrap.Modal.getInstance(apiKeyModal) : null;\n            modal.hide();\n          } else {\n            alert('Error creating API key');\n          }\n        } catch (error) {\n          alert('Error creating API key');\n        }\n      }\n    });\n  }\n\n  document.querySelectorAll('[data-delete-key]').forEach((button) => {\n    button.addEventListener('click', async (e) => {\n      if (confirm('Are you sure you want to delete this API key?')) {\n        const keyId = button.getAttribute('data-key-id');\n        try {\n          const response = await fetch(`/keys/${keyId}/delete`, {\n            method: 'POST'\n          });\n          if (response.ok) {\n            window.location.reload();\n          } else {\n            alert('Error deleting API key');\n          }\n        } catch (error) {\n          alert('Error deleting API key');\n        }\n      }\n    });\n  });\n});\n"],
  "mappings": ";;AAAA,WAAS,iBAAiB,oBAAoB,MAAM;AAElD,UAAM,cAAc,SAAS,eAAe,aAAa;AACzD,QAAI,aAAa;AACf,YAAM,aAAa,YAAY,cAAc,cAAc;AAC3D,YAAM,OAAO,YAAY,cAAc,aAAa;AACpD,YAAM,QAAQ,YAAY,cAAc,kBAAkB;AAE1D,kBAAY,iBAAiB,iBAAiB,CAAC,UAAU;AACvD,cAAM,SAAS,MAAM;AACrB,cAAM,QAAQ,OAAO,aAAa,aAAa;AAC/C,cAAM,WAAW,OAAO,aAAa,gBAAgB;AAErD,YAAI,OAAO;AAET,qBAAW,cAAc;AACzB,eAAK,SAAS,SAAS,KAAK;AAC5B,gBAAM,QAAQ;AAAA,QAChB,OAAO;AAEL,qBAAW,cAAc;AACzB,eAAK,SAAS;AACd,gBAAM,QAAQ;AAAA,QAChB;AAAA,MACF,CAAC;AAED,kBAAY,iBAAiB,kBAAkB,MAAM;AACnD,cAAM,MAAM;AAAA,MACd,CAAC;AAED,WAAK,iBAAiB,UAAU,OAAO,MAAM;AAC3C,YAAI,KAAK,OAAO,SAAS,OAAO,GAAG;AACjC,YAAE,eAAe;AACjB,gBAAM,WAAW,IAAI,SAAS,IAAI;AAClC,gBAAM,OAAO,OAAO,YAAY,SAAS,QAAQ,CAAC;AAElD,cAAI;AACF,kBAAM,WAAW,MAAM,MAAM,SAAS;AAAA,cACpC,QAAQ;AAAA,cACR,SAAS;AAAA,gBACP,gBAAgB;AAAA,cAClB;AAAA,cACA,MAAM,KAAK,UAAU,IAAI;AAAA,YAC3B,CAAC;AAED,gBAAI,SAAS,IAAI;AACf,oBAAM,EAAE,OAAO,IAAI,MAAM,SAAS,KAAK;AACvC,oBAAM,mBAAmB,SAAS,eAAe,kBAAkB;AACnE,oBAAM,mBAAmB,SAAS,eAAe,WAAW;AAC5D,oBAAM,sBAAsB,SAAS,eAAe,eAAe;AAEnE,+BAAiB,cAAc;AAC/B,kCAAoB,aAAa,kBAAkB,MAAM;AACzD,+BAAiB,UAAU,OAAO,QAAQ;AAE1C,kCAAoB,iBAAiB,SAAS,MAAM;AAClD,0BAAU,UAAU,UAAU,MAAM,EAAE,KAAK,MAAM;AAC/C,sCAAoB,YAAY;AAChC,6BAAW,MAAM;AACf,2BAAO,SAAS,OAAO;AAAA,kBACzB,GAAG,GAAI;AAAA,gBACT,CAAC;AAAA,cACH,CAAC;AAGD,oBAAM,QAAQ,OAAO,YAAY,OAAO,UAAU,MAAM,YAAY,WAAW,IAAI;AACnF,oBAAM,KAAK;AAAA,YACb,OAAO;AACL,oBAAM,wBAAwB;AAAA,YAChC;AAAA,UACF,SAAS,OAAO;AACd,kBAAM,wBAAwB;AAAA,UAChC;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,aAAS,iBAAiB,mBAAmB,EAAE,QAAQ,CAAC,WAAW;AACjE,aAAO,iBAAiB,SAAS,OAAO,MAAM;AAC5C,YAAI,QAAQ,+CAA+C,GAAG;AAC5D,gBAAM,QAAQ,OAAO,aAAa,aAAa;AAC/C,cAAI;AACF,kBAAM,WAAW,MAAM,MAAM,SAAS,KAAK,WAAW;AAAA,cACpD,QAAQ;AAAA,YACV,CAAC;AACD,gBAAI,SAAS,IAAI;AACf,qBAAO,SAAS,OAAO;AAAA,YACzB,OAAO;AACL,oBAAM,wBAAwB;AAAA,YAChC;AAAA,UACF,SAAS,OAAO;AACd,kBAAM,wBAAwB;AAAA,UAChC;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH,CAAC;",
  "names": []
}
