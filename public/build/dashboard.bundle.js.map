{
  "version": 3,
  "sources": ["../js/dashboardPage.js"],
  "sourcesContent": ["// Dashboard page script\nfunction getJSON(url) {\n  return fetch(url, {\n    credentials: 'same-origin',\n    headers: { Accept: 'application/json' }\n  }).then(async (r) => {\n    if (!r.ok) {\n      const t = await r.text();\n      throw new Error(t || `HTTP ${r.status}`);\n    }\n    return r.json();\n  });\n}\n\nfunction postJSON(url, data = {}) {\n  return fetch(url, {\n    method: 'POST',\n    credentials: 'same-origin',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(data)\n  }).then(async (r) => {\n    if (!r.ok) {\n      const t = await r.text();\n      throw new Error(t || `HTTP ${r.status}`);\n    }\n    return r.json().catch(() => ({}));\n  });\n}\n\nasync function loadUser() {\n  const userInfoEl = document.getElementById('userInfo');\n  try {\n    const me = await getJSON('/api/v3/auth/me');\n    userInfoEl.textContent = JSON.stringify(me, null, 2);\n    await loadApiKeys();\n  } catch (e) {\n    userInfoEl.textContent = 'Not authenticated';\n  }\n}\n\nasync function loadApiKeys() {\n  // Reuse /me endpoint if it eventually returns keys; placeholder separate call otherwise\n  const listEl = document.getElementById('apiKeys');\n  listEl.innerHTML = '';\n  // Placeholder: real endpoint could be /api/v3/auth/keys\n  // For now show a stub; you can extend\n  const item = document.createElement('li');\n  item.className = 'list-group-item';\n  item.textContent = 'API keys listing TBD';\n  listEl.appendChild(item);\n}\n\nconst issueBtn = document.getElementById('issueKeyBtn');\nif (issueBtn) {\n  issueBtn.addEventListener('click', async () => {\n    try {\n      await postJSON('/api/v3/auth/issue-key');\n      await loadUser();\n    } catch (e) {\n      alert(`Failed to issue key: ${e.message}`);\n    }\n  });\n}\n\nconst logoutBtn = document.getElementById('logoutBtn');\nif (logoutBtn) {\n  logoutBtn.addEventListener('click', async () => {\n    try {\n      await postJSON('/api/v3/auth/logout');\n      window.location.href = '/html/login.html';\n    } catch (e) {\n      alert('Logout failed');\n    }\n  });\n}\n\nloadUser();\n"],
  "mappings": ";;AACA,WAAS,QAAQ,KAAK;AACpB,WAAO,MAAM,KAAK;AAAA,MAChB,aAAa;AAAA,MACb,SAAS,EAAE,QAAQ,mBAAmB;AAAA,IACxC,CAAC,EAAE,KAAK,OAAO,MAAM;AACnB,UAAI,CAAC,EAAE,IAAI;AACT,cAAM,IAAI,MAAM,EAAE,KAAK;AACvB,cAAM,IAAI,MAAM,KAAK,QAAQ,EAAE,MAAM,EAAE;AAAA,MACzC;AACA,aAAO,EAAE,KAAK;AAAA,IAChB,CAAC;AAAA,EACH;AAEA,WAAS,SAAS,KAAK,OAAO,CAAC,GAAG;AAChC,WAAO,MAAM,KAAK;AAAA,MAChB,QAAQ;AAAA,MACR,aAAa;AAAA,MACb,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,MAC9C,MAAM,KAAK,UAAU,IAAI;AAAA,IAC3B,CAAC,EAAE,KAAK,OAAO,MAAM;AACnB,UAAI,CAAC,EAAE,IAAI;AACT,cAAM,IAAI,MAAM,EAAE,KAAK;AACvB,cAAM,IAAI,MAAM,KAAK,QAAQ,EAAE,MAAM,EAAE;AAAA,MACzC;AACA,aAAO,EAAE,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAAA,IAClC,CAAC;AAAA,EACH;AAEA,iBAAe,WAAW;AACxB,UAAM,aAAa,SAAS,eAAe,UAAU;AACrD,QAAI;AACF,YAAM,KAAK,MAAM,QAAQ,iBAAiB;AAC1C,iBAAW,cAAc,KAAK,UAAU,IAAI,MAAM,CAAC;AACnD,YAAM,YAAY;AAAA,IACpB,SAAS,GAAG;AACV,iBAAW,cAAc;AAAA,IAC3B;AAAA,EACF;AAEA,iBAAe,cAAc;AAE3B,UAAM,SAAS,SAAS,eAAe,SAAS;AAChD,WAAO,YAAY;AAGnB,UAAM,OAAO,SAAS,cAAc,IAAI;AACxC,SAAK,YAAY;AACjB,SAAK,cAAc;AACnB,WAAO,YAAY,IAAI;AAAA,EACzB;AAEA,MAAM,WAAW,SAAS,eAAe,aAAa;AACtD,MAAI,UAAU;AACZ,aAAS,iBAAiB,SAAS,YAAY;AAC7C,UAAI;AACF,cAAM,SAAS,wBAAwB;AACvC,cAAM,SAAS;AAAA,MACjB,SAAS,GAAG;AACV,cAAM,wBAAwB,EAAE,OAAO,EAAE;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAEA,MAAM,YAAY,SAAS,eAAe,WAAW;AACrD,MAAI,WAAW;AACb,cAAU,iBAAiB,SAAS,YAAY;AAC9C,UAAI;AACF,cAAM,SAAS,qBAAqB;AACpC,eAAO,SAAS,OAAO;AAAA,MACzB,SAAS,GAAG;AACV,cAAM,eAAe;AAAA,MACvB;AAAA,IACF,CAAC;AAAA,EACH;AAEA,WAAS;",
  "names": []
}
