(()=>{typeof window.assertBootstrapReady=="function"&&window.assertBootstrapReady("login");function d(o,s){return fetch(o,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(async e=>{if(!e.ok)throw await e.json().catch(()=>({error:`HTTP ${e.status}`}));return e.json().catch(()=>({}))})}var t=document.getElementById("loginForm"),i=document.getElementById("loadingSpinner"),c=()=>{i.classList.remove("d-none","fade")},l=()=>{i.classList.add("fade"),setTimeout(()=>{i.classList.add("d-none")},150)};t&&t.addEventListener("submit",async o=>{o.preventDefault(),c();let s=t.email.value.trim(),e=t.password.value,n=document.getElementById("loginError");n.classList.add("d-none");try{await d("/api/v3/auth/login",{email:s,password:e}),window.location.href="/dash"}catch(a){let r="An unknown error occurred.";a.error==="INVALID_CREDENTIALS"?r="Invalid email or password. Please try again.":a.message&&(r=a.message),n.textContent=r,n.classList.remove("d-none")}finally{l()}});})();
