{
  "version": 3,
  "sources": ["../js/login.js"],
  "sourcesContent": ["// Optional: verify Bootstrap JS readiness early\nif (typeof window.assertBootstrapReady === 'function') {\n  window.assertBootstrapReady('login');\n}\n// Login page script\nfunction postJSON(url, data) {\n  return fetch(url, {\n    method: 'POST',\n    credentials: 'same-origin',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(data)\n  }).then(async (r) => {\n    if (!r.ok) {\n      const errorJson = await r.json().catch(() => ({ error: `HTTP ${r.status}` }));\n      throw errorJson;\n    }\n    return r.json().catch(() => ({}));\n  });\n}\n\nconst form = document.getElementById('loginForm');\nconst loadingSpinner = document.getElementById('loadingSpinner');\n\nconst showSpinner = () => {\n  loadingSpinner.classList.remove('d-none', 'fade');\n};\n\nconst hideSpinner = () => {\n  loadingSpinner.classList.add('fade');\n  setTimeout(() => {\n    loadingSpinner.classList.add('d-none');\n  }, 150); // Match Bootstrap's fade duration\n};\n\nif (form) {\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    showSpinner();\n    const email = form.email.value.trim();\n    const password = form.password.value;\n    const errEl = document.getElementById('loginError');\n    errEl.classList.add('d-none');\n    try {\n      await postJSON('/api/v3/auth/login', { email, password });\n      // Session cookie set by server\n      window.location.href = '/dash';\n    } catch (err) {\n      let message = 'An unknown error occurred.';\n      if (err.error === 'INVALID_CREDENTIALS') {\n        message = 'Invalid email or password. Please try again.';\n      } else if (err.message) {\n        message = err.message;\n      }\n      errEl.textContent = message;\n      errEl.classList.remove('d-none');\n    } finally {\n      hideSpinner();\n    }\n  });\n}\n"],
  "mappings": ";;AACA,MAAI,OAAO,OAAO,yBAAyB,YAAY;AACrD,WAAO,qBAAqB,OAAO;AAAA,EACrC;AAEA,WAAS,SAAS,KAAK,MAAM;AAC3B,WAAO,MAAM,KAAK;AAAA,MAChB,QAAQ;AAAA,MACR,aAAa;AAAA,MACb,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,MAC9C,MAAM,KAAK,UAAU,IAAI;AAAA,IAC3B,CAAC,EAAE,KAAK,OAAO,MAAM;AACnB,UAAI,CAAC,EAAE,IAAI;AACT,cAAM,YAAY,MAAM,EAAE,KAAK,EAAE,MAAM,OAAO,EAAE,OAAO,QAAQ,EAAE,MAAM,GAAG,EAAE;AAC5E,cAAM;AAAA,MACR;AACA,aAAO,EAAE,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAAA,IAClC,CAAC;AAAA,EACH;AAEA,MAAM,OAAO,SAAS,eAAe,WAAW;AAChD,MAAM,iBAAiB,SAAS,eAAe,gBAAgB;AAE/D,MAAM,cAAc,MAAM;AACxB,mBAAe,UAAU,OAAO,UAAU,MAAM;AAAA,EAClD;AAEA,MAAM,cAAc,MAAM;AACxB,mBAAe,UAAU,IAAI,MAAM;AACnC,eAAW,MAAM;AACf,qBAAe,UAAU,IAAI,QAAQ;AAAA,IACvC,GAAG,GAAG;AAAA,EACR;AAEA,MAAI,MAAM;AACR,SAAK,iBAAiB,UAAU,OAAO,MAAM;AAC3C,QAAE,eAAe;AACjB,kBAAY;AACZ,YAAM,QAAQ,KAAK,MAAM,MAAM,KAAK;AACpC,YAAM,WAAW,KAAK,SAAS;AAC/B,YAAM,QAAQ,SAAS,eAAe,YAAY;AAClD,YAAM,UAAU,IAAI,QAAQ;AAC5B,UAAI;AACF,cAAM,SAAS,sBAAsB,EAAE,OAAO,SAAS,CAAC;AAExD,eAAO,SAAS,OAAO;AAAA,MACzB,SAAS,KAAK;AACZ,YAAI,UAAU;AACd,YAAI,IAAI,UAAU,uBAAuB;AACvC,oBAAU;AAAA,QACZ,WAAW,IAAI,SAAS;AACtB,oBAAU,IAAI;AAAA,QAChB;AACA,cAAM,cAAc;AACpB,cAAM,UAAU,OAAO,QAAQ;AAAA,MACjC,UAAE;AACA,oBAAY;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;",
  "names": []
}
