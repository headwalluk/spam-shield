{
  "version": 3,
  "sources": ["../js/register.js"],
  "sourcesContent": ["// Optional: verify Bootstrap JS readiness early\nif (typeof window.assertBootstrapReady === 'function') {\n  window.assertBootstrapReady('register');\n}\n// Register page logic\n\nfunction setStatus(el, type, message) {\n  if (!el) {\n    return;\n  }\n  el.innerHTML = '';\n  const div = document.createElement('div');\n  div.className = `alert alert-${type} py-2 mb-0`;\n  div.textContent = message;\n  el.appendChild(div);\n}\n\nfunction validateForm(form) {\n  if (!form) {\n    return false;\n  }\n  form.classList.add('was-validated');\n  return form.checkValidity();\n}\n\nconst loadingSpinner = document.getElementById('loadingSpinner');\n\nconst showSpinner = () => {\n  if (loadingSpinner) {\n    loadingSpinner.classList.remove('d-none', 'fade');\n  }\n};\n\nconst hideSpinner = () => {\n  if (loadingSpinner) {\n    loadingSpinner.classList.add('fade');\n    setTimeout(() => {\n      loadingSpinner.classList.add('d-none');\n    }, 150); // Match Bootstrap's fade duration\n  }\n};\n\nasync function onSubmit(e) {\n  e.preventDefault();\n  const form = e.currentTarget;\n  const resultEl = document.getElementById('register-result');\n  if (!validateForm(form)) {\n    setStatus(resultEl, 'danger', 'Please fix the highlighted fields.');\n    return;\n  }\n  const data = Object.fromEntries(new FormData(form));\n  showSpinner();\n  try {\n    const res = await fetch('/api/v3/auth/register', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      credentials: 'same-origin',\n      body: JSON.stringify({ email: data.email, password: data.password })\n    });\n    if (res.status === 201) {\n      setStatus(\n        resultEl,\n        'success',\n        'Registration successful. Please check your email to verify your account before logging in.'\n      );\n      form.reset();\n      form.classList.remove('was-validated');\n      return;\n    }\n    const payload = await res.json().catch(() => ({}));\n    if (res.status === 409 && payload.error === 'EMAIL_EXISTS') {\n      setStatus(resultEl, 'warning', 'That email is already registered. Try logging in.');\n      return;\n    }\n    if (res.status === 400 && payload.error === 'WEAK_PASSWORD') {\n      setStatus(resultEl, 'danger', 'Password does not meet the strength policy.');\n      return;\n    }\n    if (res.status === 403 && payload.error === 'REGISTRATION_DISABLED') {\n      setStatus(resultEl, 'warning', 'Registration is currently disabled.');\n      return;\n    }\n    setStatus(resultEl, 'danger', 'Registration failed. Please try again.');\n  } catch {\n    setStatus(resultEl, 'danger', 'Network error. Please try again.');\n  } finally {\n    hideSpinner();\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.getElementById('register-form');\n  if (form) {\n    form.addEventListener('submit', onSubmit);\n  }\n});\n"],
  "mappings": ";;AACA,MAAI,OAAO,OAAO,yBAAyB,YAAY;AACrD,WAAO,qBAAqB,UAAU;AAAA,EACxC;AAGA,WAAS,UAAU,IAAI,MAAM,SAAS;AACpC,QAAI,CAAC,IAAI;AACP;AAAA,IACF;AACA,OAAG,YAAY;AACf,UAAM,MAAM,SAAS,cAAc,KAAK;AACxC,QAAI,YAAY,eAAe,IAAI;AACnC,QAAI,cAAc;AAClB,OAAG,YAAY,GAAG;AAAA,EACpB;AAEA,WAAS,aAAa,MAAM;AAC1B,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT;AACA,SAAK,UAAU,IAAI,eAAe;AAClC,WAAO,KAAK,cAAc;AAAA,EAC5B;AAEA,MAAM,iBAAiB,SAAS,eAAe,gBAAgB;AAE/D,MAAM,cAAc,MAAM;AACxB,QAAI,gBAAgB;AAClB,qBAAe,UAAU,OAAO,UAAU,MAAM;AAAA,IAClD;AAAA,EACF;AAEA,MAAM,cAAc,MAAM;AACxB,QAAI,gBAAgB;AAClB,qBAAe,UAAU,IAAI,MAAM;AACnC,iBAAW,MAAM;AACf,uBAAe,UAAU,IAAI,QAAQ;AAAA,MACvC,GAAG,GAAG;AAAA,IACR;AAAA,EACF;AAEA,iBAAe,SAAS,GAAG;AACzB,MAAE,eAAe;AACjB,UAAM,OAAO,EAAE;AACf,UAAM,WAAW,SAAS,eAAe,iBAAiB;AAC1D,QAAI,CAAC,aAAa,IAAI,GAAG;AACvB,gBAAU,UAAU,UAAU,oCAAoC;AAClE;AAAA,IACF;AACA,UAAM,OAAO,OAAO,YAAY,IAAI,SAAS,IAAI,CAAC;AAClD,gBAAY;AACZ,QAAI;AACF,YAAM,MAAM,MAAM,MAAM,yBAAyB;AAAA,QAC/C,QAAQ;AAAA,QACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,QAC9C,aAAa;AAAA,QACb,MAAM,KAAK,UAAU,EAAE,OAAO,KAAK,OAAO,UAAU,KAAK,SAAS,CAAC;AAAA,MACrE,CAAC;AACD,UAAI,IAAI,WAAW,KAAK;AACtB;AAAA,UACE;AAAA,UACA;AAAA,UACA;AAAA,QACF;AACA,aAAK,MAAM;AACX,aAAK,UAAU,OAAO,eAAe;AACrC;AAAA,MACF;AACA,YAAM,UAAU,MAAM,IAAI,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AACjD,UAAI,IAAI,WAAW,OAAO,QAAQ,UAAU,gBAAgB;AAC1D,kBAAU,UAAU,WAAW,mDAAmD;AAClF;AAAA,MACF;AACA,UAAI,IAAI,WAAW,OAAO,QAAQ,UAAU,iBAAiB;AAC3D,kBAAU,UAAU,UAAU,6CAA6C;AAC3E;AAAA,MACF;AACA,UAAI,IAAI,WAAW,OAAO,QAAQ,UAAU,yBAAyB;AACnE,kBAAU,UAAU,WAAW,qCAAqC;AACpE;AAAA,MACF;AACA,gBAAU,UAAU,UAAU,wCAAwC;AAAA,IACxE,QAAQ;AACN,gBAAU,UAAU,UAAU,kCAAkC;AAAA,IAClE,UAAE;AACA,kBAAY;AAAA,IACd;AAAA,EACF;AAEA,WAAS,iBAAiB,oBAAoB,MAAM;AAClD,UAAM,OAAO,SAAS,eAAe,eAAe;AACpD,QAAI,MAAM;AACR,WAAK,iBAAiB,UAAU,QAAQ;AAAA,IAC1C;AAAA,EACF,CAAC;",
  "names": []
}
